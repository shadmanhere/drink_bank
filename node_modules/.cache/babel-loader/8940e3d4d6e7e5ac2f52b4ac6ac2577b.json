{"ast":null,"code":"import _toConsumableArray from \"/media/ali/Multimedia1/learn/drink_bank/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/media/ali/Multimedia1/learn/drink_bank/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/media/ali/Multimedia1/learn/drink_bank/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/media/ali/Multimedia1/learn/drink_bank/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/media/ali/Multimedia1/learn/drink_bank/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/media/ali/Multimedia1/learn/drink_bank/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/media/ali/Multimedia1/learn/drink_bank/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/media/ali/Multimedia1/learn/drink_bank/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/media/ali/Multimedia1/learn/drink_bank/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/media/ali/Multimedia1/learn/drink_bank/src/context.js\";\nimport React, { Component } from 'react';\nvar ProductContext = React.createContext();\n\nvar ProductProvider =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductProvider, _Component);\n\n  function ProductProvider() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProductProvider);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProductProvider)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      products: [],\n      Favourite: [],\n      modalOpen: false,\n      detailProduct: '',\n      modalProduct: '',\n      page: 1,\n      per_page: 6,\n      totalPages: 50,\n      hasmore: true,\n      searchTerm: '',\n      advancedUrl: \"https://api.punkapi.com/v2/beers?page=1&per_page=6\"\n    };\n    _this.getProducts =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var _this$state, page, per_page, api_call, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$state = _this.state, page = _this$state.page, per_page = _this$state.per_page;\n              _context.next = 3;\n              return fetch(\"https://api.punkapi.com/v2/beers?page=\".concat(page, \"&per_page=\").concat(per_page));\n\n            case 3:\n              api_call = _context.sent;\n              _context.next = 6;\n              return api_call.json();\n\n            case 6:\n              data = _context.sent;\n\n              _this.setProducts(data);\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this.advancedSearch = function (event) {\n      event.preventDefault();\n      var _this$state2 = _this.state,\n          page = _this$state2.page,\n          per_page = _this$state2.per_page;\n      var maxibu = event.target.maxibu.value;\n      var minibu = event.target.minibu.value;\n      var maxabv = event.target.maxabv.value;\n      var minabv = event.target.minabv.value;\n      var maxebc = event.target.maxebc.value;\n      var minebc = event.target.minebc.value;\n      var brewed_before = event.target.brewed_before.value;\n      var brewed_after = event.target.brewed_after.value;\n      var api_url = '';\n\n      if (minibu) {\n        api_url = api_url + \"&ibu_gt=\".concat(minibu);\n      }\n\n      if (maxibu) {\n        api_url = api_url + \"&ibu_lt=\".concat(maxibu);\n      }\n\n      if (minabv) {\n        api_url = api_url + \"&abv_gt=\".concat(minabv);\n      }\n\n      if (maxabv) {\n        api_url = api_url + \"&abv_lt=\".concat(maxabv);\n      }\n\n      if (minebc) {\n        api_url = api_url + \"&ebc_gt=\".concat(minebc);\n      }\n\n      if (maxebc) {\n        api_url = api_url + \"&ebc_lt=\".concat(maxebc);\n      }\n\n      if (brewed_before) {\n        api_url = api_url + \"&brewed_before=\".concat(brewed_before);\n      }\n\n      if (brewed_after) {\n        api_url = api_url + \"&brewed_after=\".concat(brewed_after);\n      }\n\n      var finalUrl = \"https://api.punkapi.com/v2/beers?page=\".concat(page, \"&per_page=\").concat(per_page).concat(api_url);\n\n      _this.setState(function () {\n        return {\n          advancedUrl: finalUrl\n        };\n      }, function () {\n        _this.getAdvancedSearchData();\n      });\n    };\n\n    _this.getAdvancedSearchData =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      var api_call, data;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(_this.state.advancedUrl);\n\n            case 2:\n              api_call = _context2.sent;\n              _context2.next = 5;\n              return api_call.json();\n\n            case 5:\n              data = _context2.sent;\n\n              _this.setFreshProducts(data);\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n    _this.fetchMoreAdvancedSearchData =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var api_call, data, tempProducts;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _this.setState(function () {\n                return {\n                  page: _this.state.page + 1\n                };\n              });\n\n              if (_this.state.page > _this.state.totalPages) {\n                _this.setState(function () {\n                  return {\n                    hasmore: false\n                  };\n                });\n              }\n\n              _context3.next = 4;\n              return fetch(_this.state.advancedUrl);\n\n            case 4:\n              api_call = _context3.sent;\n              _context3.next = 7;\n              return api_call.json();\n\n            case 7:\n              data = _context3.sent;\n              tempProducts = [];\n              data.forEach(function (item) {\n                var singleItem = _objectSpread({}, item);\n\n                tempProducts = [].concat(_toConsumableArray(tempProducts), [singleItem]);\n              });\n\n              _this.setState(function () {\n                return {\n                  products: _this.state.products.concat(tempProducts)\n                };\n              });\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this);\n    }));\n\n    _this.fetchMoreData = function () {\n      _this.setState(function () {\n        return {\n          page: _this.state.page + 1\n        };\n      });\n\n      if (_this.state.page > _this.state.totalPages) {\n        _this.setState(function () {\n          return {\n            hasmore: false\n          };\n        });\n      }\n\n      _this.getProducts();\n    };\n\n    _this.setProducts = function (data) {\n      var tempProducts = [];\n      data.forEach(function (item) {\n        var singleItem = _objectSpread({}, item);\n\n        tempProducts = [].concat(_toConsumableArray(tempProducts), [singleItem]);\n      });\n\n      _this.setState(function () {\n        return {\n          products: _this.state.products.concat(tempProducts)\n        };\n      });\n    };\n\n    _this.setFreshProducts = function (data) {\n      var tempProducts = [];\n      data.forEach(function (item) {\n        var singleItem = _objectSpread({}, item);\n\n        tempProducts = [].concat(_toConsumableArray(tempProducts), [singleItem]);\n      });\n\n      _this.setState(function () {\n        return {\n          products: tempProducts\n        };\n      });\n    };\n\n    _this.getItem = function (id) {\n      var product = _this.state.products.find(function (item) {\n        return item.id === id;\n      });\n\n      return product;\n    };\n\n    _this.handleDetail = function (id) {\n      var product = _this.getItem(id);\n\n      _this.setState(function () {\n        return {\n          detailProduct: product\n        };\n      });\n    };\n\n    _this.removeItem = function (id) {\n      var tempProducts = _toConsumableArray(_this.state.products);\n\n      var tempFavourite = _toConsumableArray(_this.state.Favourite);\n\n      tempFavourite = tempFavourite.filter(function (item) {\n        return item.id !== id;\n      });\n      var index = tempProducts.indexOf(_this.getItem(id));\n      var removeProduct = tempProducts[index];\n      removeProduct.inFavourite = false;\n\n      _this.setState(function () {\n        return {\n          Favourite: _toConsumableArray(tempFavourite),\n          products: _toConsumableArray(tempProducts)\n        };\n      });\n    };\n\n    _this.addToFavourite = function (id) {\n      var tempProducts = _toConsumableArray(_this.state.products);\n\n      var index = tempProducts.indexOf(_this.getItem(id));\n      var product = tempProducts[index];\n\n      if (!product.inFavourite) {\n        product.inFavourite = true;\n\n        _this.setState(function () {\n          return {\n            products: tempProducts,\n            Favourite: [].concat(_toConsumableArray(_this.state.Favourite), [product])\n          };\n        });\n      } else {\n        _this.removeItem(id);\n      }\n    };\n\n    _this.openModal = function (id) {\n      var product = _this.getItem(id);\n\n      _this.setState(function () {\n        return {\n          modalProduct: product,\n          modalOpen: true\n        };\n      });\n    };\n\n    _this.closeModal = function () {\n      _this.setState(function () {\n        return {\n          modalOpen: false\n        };\n      });\n    };\n\n    _this.searchBox = function (event) {\n      event.preventDefault();\n      var search = event.target.searchbox.value;\n\n      _this.setState(function () {\n        return {\n          searchTerm: search\n        };\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ProductProvider, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getProducts();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(ProductContext.Provider, {\n        value: _objectSpread({}, this.state, {\n          handleDetail: this.handleDetail,\n          addToFavourite: this.addToFavourite,\n          openModal: this.openModal,\n          closeModal: this.closeModal,\n          increment: this.increment,\n          decrement: this.decrement,\n          removeItem: this.removeItem,\n          clearFavourite: this.clearFavourite,\n          getMightLikeProducts: this.getMightLikeProducts,\n          fetchMoreData: this.fetchMoreData,\n          searchBox: this.searchBox,\n          advancedSearch: this.advancedSearch,\n          fetchMoreAdvancedSearchData: this.fetchMoreAdvancedSearchData\n        }),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, this.props.children);\n    }\n  }]);\n\n  return ProductProvider;\n}(Component);\n\nvar ProductConsumer = ProductContext.Consumer;\nexport { ProductProvider, ProductConsumer };","map":{"version":3,"sources":["/media/ali/Multimedia1/learn/drink_bank/src/context.js"],"names":["React","Component","ProductContext","createContext","ProductProvider","state","products","Favourite","modalOpen","detailProduct","modalProduct","page","per_page","totalPages","hasmore","searchTerm","advancedUrl","getProducts","fetch","api_call","json","data","setProducts","advancedSearch","event","preventDefault","maxibu","target","value","minibu","maxabv","minabv","maxebc","minebc","brewed_before","brewed_after","api_url","finalUrl","setState","getAdvancedSearchData","setFreshProducts","fetchMoreAdvancedSearchData","tempProducts","forEach","item","singleItem","concat","fetchMoreData","getItem","id","product","find","handleDetail","removeItem","tempFavourite","filter","index","indexOf","removeProduct","inFavourite","addToFavourite","openModal","closeModal","searchBox","search","searchbox","increment","decrement","clearFavourite","getMightLikeProducts","props","children","ProductConsumer","Consumer"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,IAAMC,cAAc,GAAGF,KAAK,CAACG,aAAN,EAAvB;;IACMC,e;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,QAAQ,EAAE,EADJ;AAENC,MAAAA,SAAS,EAAC,EAFJ;AAGNC,MAAAA,SAAS,EAAC,KAHJ;AAINC,MAAAA,aAAa,EAAC,EAJR;AAKNC,MAAAA,YAAY,EAAC,EALP;AAMNC,MAAAA,IAAI,EAAC,CANC;AAONC,MAAAA,QAAQ,EAAC,CAPH;AAQNC,MAAAA,UAAU,EAAE,EARN;AASNC,MAAAA,OAAO,EAAC,IATF;AAUNC,MAAAA,UAAU,EAAC,EAVL;AAWNC,MAAAA,WAAW;AAXL,K;UAeRC,W;;;;6BAAc;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,4BACe,MAAKZ,KADpB,EACJM,IADI,eACJA,IADI,EACEC,QADF,eACEA,QADF;AAAA;AAAA,qBAEWM,KAAK,iDAA0CP,IAA1C,uBAA2DC,QAA3D,EAFhB;;AAAA;AAENO,cAAAA,QAFM;AAAA;AAAA,qBAGOA,QAAQ,CAACC,IAAT,EAHP;;AAAA;AAGNC,cAAAA,IAHM;;AAIZ,oBAAKC,WAAL,CAAiBD,IAAjB;;AAJY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;UAOdE,c,GAAiB,UAACC,KAAD,EAAW;AAC1BA,MAAAA,KAAK,CAACC,cAAN;AAD0B,yBAEC,MAAKpB,KAFN;AAAA,UAElBM,IAFkB,gBAElBA,IAFkB;AAAA,UAEZC,QAFY,gBAEZA,QAFY;AAG1B,UAAMc,MAAM,GAAGF,KAAK,CAACG,MAAN,CAAaD,MAAb,CAAoBE,KAAnC;AACA,UAAMC,MAAM,GAAGL,KAAK,CAACG,MAAN,CAAaE,MAAb,CAAoBD,KAAnC;AACA,UAAME,MAAM,GAAGN,KAAK,CAACG,MAAN,CAAaG,MAAb,CAAoBF,KAAnC;AACA,UAAMG,MAAM,GAAGP,KAAK,CAACG,MAAN,CAAaI,MAAb,CAAoBH,KAAnC;AACA,UAAMI,MAAM,GAAGR,KAAK,CAACG,MAAN,CAAaK,MAAb,CAAoBJ,KAAnC;AACA,UAAMK,MAAM,GAAGT,KAAK,CAACG,MAAN,CAAaM,MAAb,CAAoBL,KAAnC;AACA,UAAMM,aAAa,GAAGV,KAAK,CAACG,MAAN,CAAaO,aAAb,CAA2BN,KAAjD;AACA,UAAMO,YAAY,GAAGX,KAAK,CAACG,MAAN,CAAaQ,YAAb,CAA0BP,KAA/C;AACA,UAAIQ,OAAO,GAAG,EAAd;;AACA,UAAGP,MAAH,EAAU;AACRO,QAAAA,OAAO,GAAGA,OAAO,qBAAcP,MAAd,CAAjB;AACD;;AACD,UAAGH,MAAH,EAAU;AACRU,QAAAA,OAAO,GAAGA,OAAO,qBAAcV,MAAd,CAAjB;AACD;;AACD,UAAGK,MAAH,EAAU;AACRK,QAAAA,OAAO,GAAGA,OAAO,qBAAcL,MAAd,CAAjB;AACD;;AACD,UAAGD,MAAH,EAAU;AACRM,QAAAA,OAAO,GAAGA,OAAO,qBAAcN,MAAd,CAAjB;AACD;;AACD,UAAGG,MAAH,EAAU;AACRG,QAAAA,OAAO,GAAGA,OAAO,qBAAcH,MAAd,CAAjB;AACD;;AACD,UAAGD,MAAH,EAAU;AACRI,QAAAA,OAAO,GAAGA,OAAO,qBAAcJ,MAAd,CAAjB;AACD;;AACD,UAAGE,aAAH,EAAiB;AACfE,QAAAA,OAAO,GAAGA,OAAO,4BAAqBF,aAArB,CAAjB;AACD;;AACD,UAAGC,YAAH,EAAgB;AACdC,QAAAA,OAAO,GAAGA,OAAO,2BAAoBD,YAApB,CAAjB;AACD;;AACD,UAAIE,QAAQ,mDAA4C1B,IAA5C,uBAA6DC,QAA7D,SAAwEwB,OAAxE,CAAZ;;AACA,YAAKE,QAAL,CAAc,YAAI;AAChB,eAAO;AAACtB,UAAAA,WAAW,EAACqB;AAAb,SAAP;AACD,OAFD,EAEE,YAAM;AACN,cAAKE,qBAAL;AACD,OAJD;AAKD,K;;UAEDA,qB;;;;6BAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACCrB,KAAK,CAAC,MAAKb,KAAL,CAAWW,WAAZ,CADN;;AAAA;AAChBG,cAAAA,QADgB;AAAA;AAAA,qBAEHA,QAAQ,CAACC,IAAT,EAFG;;AAAA;AAEhBC,cAAAA,IAFgB;;AAGtB,oBAAKmB,gBAAL,CAAsBnB,IAAtB;;AAHsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;UAMxBoB,2B;;;;6BAA8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAC5B,oBAAKH,QAAL,CAAc,YAAI;AAChB,uBAAO;AAAC3B,kBAAAA,IAAI,EAAC,MAAKN,KAAL,CAAWM,IAAX,GAAkB;AAAxB,iBAAP;AACD,eAFD;;AAGA,kBAAG,MAAKN,KAAL,CAAWM,IAAX,GAAkB,MAAKN,KAAL,CAAWQ,UAAhC,EAA2C;AACzC,sBAAKyB,QAAL,CAAc,YAAI;AAChB,yBAAO;AAACxB,oBAAAA,OAAO,EAAC;AAAT,mBAAP;AACD,iBAFD;AAGD;;AAR2B;AAAA,qBASLI,KAAK,CAAC,MAAKb,KAAL,CAAWW,WAAZ,CATA;;AAAA;AAStBG,cAAAA,QATsB;AAAA;AAAA,qBAUTA,QAAQ,CAACC,IAAT,EAVS;;AAAA;AAUtBC,cAAAA,IAVsB;AAWxBqB,cAAAA,YAXwB,GAWT,EAXS;AAY1BrB,cAAAA,IAAI,CAACsB,OAAL,CAAa,UAAAC,IAAI,EAAI;AACrB,oBAAMC,UAAU,qBAAOD,IAAP,CAAhB;;AACAF,gBAAAA,YAAY,gCAAOA,YAAP,IAAoBG,UAApB,EAAZ;AACD,eAHC;;AAIF,oBAAKP,QAAL,CAAc,YAAI;AAChB,uBAAO;AAAChC,kBAAAA,QAAQ,EAAC,MAAKD,KAAL,CAAWC,QAAX,CAAoBwC,MAApB,CAA2BJ,YAA3B;AAAV,iBAAP;AACD,eAFD;;AAhB4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;UAqB9BK,a,GAAgB,YAAM;AACpB,YAAKT,QAAL,CAAc,YAAI;AAChB,eAAO;AAAC3B,UAAAA,IAAI,EAAC,MAAKN,KAAL,CAAWM,IAAX,GAAkB;AAAxB,SAAP;AACD,OAFD;;AAGA,UAAG,MAAKN,KAAL,CAAWM,IAAX,GAAkB,MAAKN,KAAL,CAAWQ,UAAhC,EAA2C;AACzC,cAAKyB,QAAL,CAAc,YAAM;AAClB,iBAAO;AAACxB,YAAAA,OAAO,EAAC;AAAT,WAAP;AACD,SAFD;AAGD;;AACD,YAAKG,WAAL;AACD,K;;UAMDK,W,GAAc,UAACD,IAAD,EAAU;AACtB,UAAIqB,YAAY,GAAG,EAAnB;AACErB,MAAAA,IAAI,CAACsB,OAAL,CAAa,UAAAC,IAAI,EAAI;AACrB,YAAMC,UAAU,qBAAOD,IAAP,CAAhB;;AACAF,QAAAA,YAAY,gCAAOA,YAAP,IAAoBG,UAApB,EAAZ;AACD,OAHC;;AAIF,YAAKP,QAAL,CAAc,YAAI;AAChB,eAAO;AAAChC,UAAAA,QAAQ,EAAC,MAAKD,KAAL,CAAWC,QAAX,CAAoBwC,MAApB,CAA2BJ,YAA3B;AAAV,SAAP;AACD,OAFD;AAGD,K;;UAEDF,gB,GAAmB,UAACnB,IAAD,EAAU;AAC3B,UAAIqB,YAAY,GAAG,EAAnB;AACErB,MAAAA,IAAI,CAACsB,OAAL,CAAa,UAAAC,IAAI,EAAI;AACrB,YAAMC,UAAU,qBAAOD,IAAP,CAAhB;;AACAF,QAAAA,YAAY,gCAAOA,YAAP,IAAoBG,UAApB,EAAZ;AACD,OAHC;;AAIF,YAAKP,QAAL,CAAc,YAAI;AAChB,eAAO;AAAChC,UAAAA,QAAQ,EAACoC;AAAV,SAAP;AACD,OAFD;AAGD,K;;UAEDM,O,GAAU,UAAAC,EAAE,EAAI;AACd,UAAMC,OAAO,GAAG,MAAK7C,KAAL,CAAWC,QAAX,CAAoB6C,IAApB,CAAyB,UAAAP,IAAI;AAAA,eAAIA,IAAI,CAACK,EAAL,KAAYA,EAAhB;AAAA,OAA7B,CAAhB;;AACA,aAAOC,OAAP;AACD,K;;UAEDE,Y,GAAe,UAACH,EAAD,EAAQ;AACrB,UAAMC,OAAO,GAAG,MAAKF,OAAL,CAAaC,EAAb,CAAhB;;AACA,YAAKX,QAAL,CAAc,YAAI;AAChB,eAAO;AAAC7B,UAAAA,aAAa,EAACyC;AAAf,SAAP;AACD,OAFD;AAGD,K;;UAEDG,U,GAAa,UAAAJ,EAAE,EAAI;AACjB,UAAIP,YAAY,sBAAO,MAAKrC,KAAL,CAAWC,QAAlB,CAAhB;;AACA,UAAIgD,aAAa,sBAAO,MAAKjD,KAAL,CAAWE,SAAlB,CAAjB;;AACA+C,MAAAA,aAAa,GAAGA,aAAa,CAACC,MAAd,CAAqB,UAAAX,IAAI;AAAA,eAAIA,IAAI,CAACK,EAAL,KAAYA,EAAhB;AAAA,OAAzB,CAAhB;AACA,UAAMO,KAAK,GAAGd,YAAY,CAACe,OAAb,CAAqB,MAAKT,OAAL,CAAaC,EAAb,CAArB,CAAd;AACA,UAAIS,aAAa,GAAGhB,YAAY,CAACc,KAAD,CAAhC;AACAE,MAAAA,aAAa,CAACC,WAAd,GAA4B,KAA5B;;AACA,YAAKrB,QAAL,CAAc,YAAI;AAChB,eAAO;AACL/B,UAAAA,SAAS,qBAAK+C,aAAL,CADJ;AAELhD,UAAAA,QAAQ,qBAAKoC,YAAL;AAFH,SAAP;AAID,OALD;AAMD,K;;UAGDkB,c,GAAiB,UAAAX,EAAE,EAAI;AACrB,UAAIP,YAAY,sBAAO,MAAKrC,KAAL,CAAWC,QAAlB,CAAhB;;AACA,UAAMkD,KAAK,GAAGd,YAAY,CAACe,OAAb,CAAqB,MAAKT,OAAL,CAAaC,EAAb,CAArB,CAAd;AACA,UAAMC,OAAO,GAAGR,YAAY,CAACc,KAAD,CAA5B;;AACA,UAAG,CAACN,OAAO,CAACS,WAAZ,EACA;AACET,QAAAA,OAAO,CAACS,WAAR,GAAsB,IAAtB;;AACA,cAAKrB,QAAL,CAAc,YAAI;AAChB,iBAAO;AAAChC,YAAAA,QAAQ,EAACoC,YAAV;AACLnC,YAAAA,SAAS,+BAAK,MAAKF,KAAL,CAAWE,SAAhB,IAA0B2C,OAA1B;AADJ,WAAP;AAED,SAHD;AAID,OAPD,MAOO;AACL,cAAKG,UAAL,CAAgBJ,EAAhB;AACD;AACF,K;;UAEDY,S,GAAY,UAAAZ,EAAE,EAAI;AAChB,UAAMC,OAAO,GAAG,MAAKF,OAAL,CAAaC,EAAb,CAAhB;;AACA,YAAKX,QAAL,CAAc,YAAI;AAChB,eAAO;AAAE5B,UAAAA,YAAY,EAACwC,OAAf;AAAwB1C,UAAAA,SAAS,EAAE;AAAnC,SAAP;AACD,OAFD;AAGD,K;;UAEDsD,U,GAAa,YAAM;AACjB,YAAKxB,QAAL,CAAc,YAAI;AAChB,eAAO;AAAE9B,UAAAA,SAAS,EAAE;AAAb,SAAP;AACD,OAFD;AAGD,K;;UAEDuD,S,GAAY,UAACvC,KAAD,EAAW;AACrBA,MAAAA,KAAK,CAACC,cAAN;AACA,UAAMuC,MAAM,GAAGxC,KAAK,CAACG,MAAN,CAAasC,SAAb,CAAuBrC,KAAtC;;AACE,YAAKU,QAAL,CAAc,YAAI;AAChB,eAAO;AAACvB,UAAAA,UAAU,EAACiD;AAAZ,SAAP;AACD,OAFD;AAGH,K;;;;;;;wCAzFmB;AAClB,WAAK/C,WAAL;AACD;;;6BA0FQ;AACP,aACE,oBAAC,cAAD,CAAgB,QAAhB;AAAyB,QAAA,KAAK,oBACzB,KAAKZ,KADoB;AAE5B+C,UAAAA,YAAY,EAAE,KAAKA,YAFS;AAG5BQ,UAAAA,cAAc,EAAE,KAAKA,cAHO;AAI5BC,UAAAA,SAAS,EAAE,KAAKA,SAJY;AAK5BC,UAAAA,UAAU,EAAE,KAAKA,UALW;AAM5BI,UAAAA,SAAS,EAAC,KAAKA,SANa;AAO5BC,UAAAA,SAAS,EAAC,KAAKA,SAPa;AAQ5Bd,UAAAA,UAAU,EAAC,KAAKA,UARY;AAS5Be,UAAAA,cAAc,EAAC,KAAKA,cATQ;AAU5BC,UAAAA,oBAAoB,EAAE,KAAKA,oBAVC;AAW5BtB,UAAAA,aAAa,EAAC,KAAKA,aAXS;AAY5BgB,UAAAA,SAAS,EAAC,KAAKA,SAZa;AAa5BxC,UAAAA,cAAc,EAAC,KAAKA,cAbQ;AAc5BkB,UAAAA,2BAA2B,EAAC,KAAKA;AAdL,UAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAgBG,KAAK6B,KAAL,CAAWC,QAhBd,CADF;AAoBD;;;;EA3N2BtE,S;;AA8N9B,IAAMuE,eAAe,GAAGtE,cAAc,CAACuE,QAAvC;AAEA,SAASrE,eAAT,EAA0BoE,eAA1B","sourcesContent":["import React, { Component } from 'react'\nconst ProductContext = React.createContext();\nclass ProductProvider extends Component {\n  state = {\n    products: [],\n    Favourite:[],\n    modalOpen:false,\n    detailProduct:'',\n    modalProduct:'',\n    page:1,\n    per_page:6,\n    totalPages: 50,\n    hasmore:true,\n    searchTerm:'',\n    advancedUrl:`https://api.punkapi.com/v2/beers?page=1&per_page=6`,\n  }\n\n\n  getProducts = async() => {\n    const { page, per_page } = this.state\n    const api_call = await fetch(`https://api.punkapi.com/v2/beers?page=${page}&per_page=${per_page}`);\n    const data = await api_call.json();\n    this.setProducts(data);\n  }\n\n  advancedSearch = (event) => {\n    event.preventDefault();\n    const { page, per_page } = this.state\n    const maxibu = event.target.maxibu.value;\n    const minibu = event.target.minibu.value;\n    const maxabv = event.target.maxabv.value;\n    const minabv = event.target.minabv.value;\n    const maxebc = event.target.maxebc.value;\n    const minebc = event.target.minebc.value;\n    const brewed_before = event.target.brewed_before.value;\n    const brewed_after = event.target.brewed_after.value;\n    let api_url = '';\n    if(minibu){\n      api_url = api_url + `&ibu_gt=${minibu}`\n    }\n    if(maxibu){\n      api_url = api_url + `&ibu_lt=${maxibu}`\n    }\n    if(minabv){\n      api_url = api_url + `&abv_gt=${minabv}`\n    }\n    if(maxabv){\n      api_url = api_url + `&abv_lt=${maxabv}`\n    }\n    if(minebc){\n      api_url = api_url + `&ebc_gt=${minebc}`\n    }\n    if(maxebc){\n      api_url = api_url + `&ebc_lt=${maxebc}`\n    }\n    if(brewed_before){\n      api_url = api_url + `&brewed_before=${brewed_before}`\n    }\n    if(brewed_after){\n      api_url = api_url + `&brewed_after=${brewed_after}`\n    }\n    let finalUrl = `https://api.punkapi.com/v2/beers?page=${page}&per_page=${per_page}${api_url}`\n    this.setState(()=>{\n      return {advancedUrl:finalUrl};\n    },() => {\n      this.getAdvancedSearchData();\n    })   \n  }\n\n  getAdvancedSearchData = async() => {\n    const api_call = await fetch(this.state.advancedUrl);\n    const data = await api_call.json();\n    this.setFreshProducts(data);\n  }\n\n  fetchMoreAdvancedSearchData = async() => {\n    this.setState(()=>{\n      return {page:this.state.page + 1};\n    })\n    if(this.state.page > this.state.totalPages){\n      this.setState(()=>{\n        return {hasmore:false};\n      })\n    }\n    const api_call = await fetch(this.state.advancedUrl);\n    const data = await api_call.json();\n    let tempProducts = [];\n      data.forEach(item => {\n      const singleItem = {...item};\n      tempProducts = [...tempProducts,singleItem]\n    })\n    this.setState(()=>{\n      return {products:this.state.products.concat(tempProducts)}\n    })\n  }\n\n  fetchMoreData = () => {\n    this.setState(()=>{\n      return {page:this.state.page + 1};\n    })\n    if(this.state.page > this.state.totalPages){\n      this.setState(() => {\n        return {hasmore:false};\n      })\n    }\n    this.getProducts()\n  }\n\n  componentDidMount() {\n    this.getProducts();\n  }\n\n  setProducts = (data) => {\n    let tempProducts = [];\n      data.forEach(item => {\n      const singleItem = {...item};\n      tempProducts = [...tempProducts,singleItem]\n    })\n    this.setState(()=>{\n      return {products:this.state.products.concat(tempProducts)}\n    })\n  }\n\n  setFreshProducts = (data) => {\n    let tempProducts = [];\n      data.forEach(item => {\n      const singleItem = {...item};\n      tempProducts = [...tempProducts,singleItem]\n    })\n    this.setState(()=>{\n      return {products:tempProducts}\n    })\n  }\n\n  getItem = id => {\n    const product = this.state.products.find(item => item.id === id)\n    return product\n  }\n\n  handleDetail = (id) => {\n    const product = this.getItem(id);\n    this.setState(()=>{\n      return {detailProduct:product};\n    })\n  }\n\n  removeItem = id => {\n    let tempProducts = [...this.state.products];\n    let tempFavourite = [...this.state.Favourite];\n    tempFavourite = tempFavourite.filter(item => item.id !== id);\n    const index = tempProducts.indexOf(this.getItem(id));\n    let removeProduct = tempProducts[index];\n    removeProduct.inFavourite = false;\n    this.setState(()=>{\n      return {\n        Favourite:[...tempFavourite],\n        products:[...tempProducts]\n      }\n    })\n  }\n\n\n  addToFavourite = id => {\n    let tempProducts = [...this.state.products];\n    const index = tempProducts.indexOf(this.getItem(id));\n    const product = tempProducts[index];\n    if(!product.inFavourite)\n    {\n      product.inFavourite = true;\n      this.setState(()=>{\n        return {products:tempProducts,\n          Favourite:[...this.state.Favourite,product]};\n      })\n    } else {\n      this.removeItem(id);\n    }\n  }\n\n  openModal = id => {\n    const product = this.getItem(id);\n    this.setState(()=>{\n      return { modalProduct:product, modalOpen: true }\n    })\n  }\n\n  closeModal = () => {\n    this.setState(()=>{\n      return { modalOpen: false }\n    })\n  }\n\n  searchBox = (event) => {\n    event.preventDefault();\n    const search = event.target.searchbox.value;\n      this.setState(()=>{\n        return {searchTerm:search};\n      })\n  }\n\n\n  render() {\n    return (\n      <ProductContext.Provider value={{\n        ...this.state,\n        handleDetail: this.handleDetail,\n        addToFavourite: this.addToFavourite,\n        openModal: this.openModal,\n        closeModal: this.closeModal,\n        increment:this.increment,\n        decrement:this.decrement,\n        removeItem:this.removeItem,\n        clearFavourite:this.clearFavourite,\n        getMightLikeProducts: this.getMightLikeProducts,\n        fetchMoreData:this.fetchMoreData,\n        searchBox:this.searchBox,\n        advancedSearch:this.advancedSearch,\n        fetchMoreAdvancedSearchData:this.fetchMoreAdvancedSearchData\n      }}>\n        {this.props.children}\n      </ProductContext.Provider>\n    )\n  }\n}\n\nconst ProductConsumer = ProductContext.Consumer;\n\nexport { ProductProvider, ProductConsumer }"]},"metadata":{},"sourceType":"module"}